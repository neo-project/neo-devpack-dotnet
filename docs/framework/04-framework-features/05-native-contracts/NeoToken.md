# Native Contract: NeoToken (NEO)

Namespace: `Neo.SmartContract.Framework.Native`

Represents the NEO token contract. NEO is the governance token of the Neo blockchain. It follows the NEP-17 fungible token standard and also includes methods related to governance functions like voting and GAS distribution.

## NEP-17 Standard Methods

Provides static methods corresponding to the NEP-17 standard:

*   **`Symbol` (`string`)**: Returns the token symbol ("NEO").
*   **`Decimals` (`byte`)**: Returns the number of decimals (0, as NEO is indivisible).
*   **`TotalSupply()` (`System.Numerics.BigInteger`)**: Returns the total supply of NEO (100,000,000).
*   **`BalanceOf(UInt160 account)` (`System.Numerics.BigInteger`)**: Gets the NEO balance of the specified account.
*   **`Transfer(UInt160 from, UInt160 to, System.Numerics.BigInteger amount, object data)` (`bool`)**: Transfers NEO from the `from` account to the `to` account.
    *   Requires `Runtime.CheckWitness(from)` or prior approval.
    *   NEO amount must be a whole number (no decimals).
    *   Returns `true` on success.

## Governance Methods

*   **`UnclaimedGas(UInt160 account, uint end)` (`System.Numerics.BigInteger`)**: Calculates the amount of unclaimed GAS generated by the NEO held in the account up to (but not including) the specified block index `end`.
*   **`RegisterCandidate(ECPoint pubkey)` (`bool`)**: Registers the account associated with the public key as a candidate for the Neo Council.
    *   Requires `Runtime.CheckWitness` of the account.
    *   Requires a registration fee in GAS.
*   **`UnregisterCandidate(ECPoint pubkey)` (`bool`)**: Unregisters a candidate.
    *   Requires `Runtime.CheckWitness` of the account.
*   **`Vote(UInt160 account, ECPoint voteTo)` (`bool`)**: Casts a vote from the `account` to a specific candidate public key (`voteTo`).
    *   `voteTo` can be `null` to cancel a previous vote.
    *   The voting weight is proportional to the NEO balance of the `account`.
    *   Requires `Runtime.CheckWitness(account)`.
*   **`GetCandidates()` (`(ECPoint PublicKey, BigInteger Votes)[]`)**: Returns a list of all registered candidates and their current vote counts.
*   **`GetNextBlockValidators()` (`ECPoint[]`)**: Returns the public keys of the validators selected for the next block (subset of the Neo Council).
*   **`GetCommittee()` (`ECPoint[]`)**: Returns the public keys of the current Neo Council members.
*   **`GetCommitteeAddress()` (`UInt160`)**: Gets the multi-sig address of the current Neo committee.
*   **`GetAccountState(UInt160 account)` (`NeoAccountState`)**: Returns the state of an account related to voting, including balance and vote target.
    *   `NeoAccountState` has properties: `Balance` (`BigInteger`), `BalanceHeight` (`uint`), `VoteTo` (`ECPoint`).

## Example Usage

```csharp
using Neo.SmartContract.Framework;
using Neo.SmartContract.Framework.Attributes;
using Neo.SmartContract.Framework.Native;
using Neo.SmartContract.Framework.Services;
using System.Numerics;

[ContractPermission(nameof(NeoToken), "balanceOf", "vote", "getCommittee", "unclaimedGas")]
[ContractPermission(nameof(GasToken), "transfer")] // Needed for candidate registration fee
public class NeoDemo : SmartContract
{
    public static BigInteger GetAccountNeoBalance(UInt160 account)
    {
        return NeoToken.BalanceOf(account);
    }

    // Calculate unclaimed GAS for an account up to the current block
    public static BigInteger CheckUnclaimedGas(UInt160 account)
    {
        uint currentBlock = LedgerContract.CurrentIndex;
        return NeoToken.UnclaimedGas(account, currentBlock);
    }

    // Vote for a specific candidate (requires caller to sign)
    public static bool VoteForCandidate(ECPoint candidatePublicKey)
    {
        UInt160 voter = Runtime.Transaction.Sender; // Example: Get voter from sender
        if (!Runtime.CheckWitness(voter)) return false;

        return NeoToken.Vote(voter, candidatePublicKey);
    }

    // Get the list of current committee members' public keys
    public static ECPoint[] GetCurrentCommittee()
    {
        return NeoToken.GetCommittee();
    }

    // Example: Registering as a candidate (Simplified - assumes caller has enough GAS)
    // public static bool Register(ECPoint callerPublicKey)
    // {
    //     UInt160 callerAccount = Contract.CreateStandardAccount(callerPublicKey);
    //     if (!Runtime.CheckWitness(callerAccount)) return false;

    //     long regFee = PolicyContract.GetCandidateRegistrationFee(); 
    //     if (!GasToken.Transfer(callerAccount, NeoToken.Hash, regFee, null)) return false;

    //     return NeoToken.RegisterCandidate(callerPublicKey);
    // }
}
```

**Important:**

*   NEO is indivisible (`Decimals = 0`). Transfers must use whole numbers.
*   Governance actions like voting and candidate registration often require `Runtime.CheckWitness` and may involve GAS fees.

[Previous: NameService (NNS)](./NameService.md) | [Next: OracleContract](./Oracle.md)